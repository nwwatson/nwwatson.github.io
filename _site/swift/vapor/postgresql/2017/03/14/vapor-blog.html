<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Beginning Vapor: Lets Write a Blog &vert; Nicholas W. Watson</title>
<meta name="description" content="Over 10 years ago, Ruby on Rails made a huge impact on me when I saw the "Blog in 15 Minutes" tutorial. I'd like to do the same for Vapor, a server side Swift framework.
">
<meta name="keywords" content="">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://localhost:4000/images/">
<meta name="twitter:title" content="Beginning Vapor: Lets Write a Blog">
<meta name="twitter:description" content="Over 10 years ago, Ruby on Rails made a huge impact on me when I saw the "Blog in 15 Minutes" tutorial. I'd like to do the same for Vapor, a server side Swift framework.
">
<meta name="twitter:creator" content="@nwwatson">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Beginning Vapor: Lets Write a Blog">
<meta property="og:description" content="Over 10 years ago, Ruby on Rails made a huge impact on me when I saw the "Blog in 15 Minutes" tutorial. I'd like to do the same for Vapor, a server side Swift framework.
">
<meta property="og:url" content="http://localhost:4000/swift/vapor/postgresql/2017/03/14/vapor-blog.html">
<meta property="og:site_name" content="Nicholas W. Watson">

<meta property="og:image" content="http://localhost:4000/images/">




<link rel="canonical" href="http://localhost:4000/swift/vapor/postgresql/2017/03/14/vapor-blog.html">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Nicholas W. Watson Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

<link href="http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=Open+Sans:300" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="https://unpkg.com/purecss@0.6.2/build/pure-min.css" integrity="sha384-" crossorigin="anonymous">

<!--[if lte IE 8]>
    <link rel="stylesheet" href="https://unpkg.com/purecss@0.6.2/build/grids-responsive-old-ie-min.css">
<![endif]-->
<!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="https://unpkg.com/purecss@0.6.2/build/grids-responsive-min.css">
<!--<![endif]-->

<link rel="stylesheet" href="http://localhost:4000/assets/css/styles.css">

</head>
<body class="home-template" itemscope itemtype="http://schema.org/WebPage">

  <div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
  <div class="header">
      <h1 class="brand-title"><a class="brand-link" href="/">Nicholas Watson</a></h1>
      <h2 class="brand-tagline">Technology, software, development.</h2>

      <nav class="nav">
          <ul class="nav-list">

          </ul>
      </nav>
  </div>
</div>

    <div class="content pure-u-1 pure-u-md-3-4">
      <!-- A single blog post -->
    	<section class="post">
    		<header class="post-header">
    			<div class="date">
    				<time datetime="2017-03-14T19:25:00-04:00"><span class="day">14</span> <span class="month-year">March 2017</span></time>
    			</div>

    			<h2>
    				<a href="http://localhost:4000">
    						Beginning Vapor: Lets Write a Blog
    				</a>
    			</h2>
    			<p class="post-meta">
    				<a class="post-category post-category-pure" href="#" title="Other posts from the Swift category">Swift</a>&nbsp;<a class="post-category post-category-pure" href="#" title="Other posts from the Vapor category">Vapor</a>&nbsp;<a class="post-category post-category-pure" href="#" title="Other posts from the Postgresql category">Postgresql</a>
    			</p>
    		</header>

    			<div class="post-description">
    				<p>Over 10 years ago, Ruby on Rails made a huge impact on me when I saw the
“Blog in 15 Minutes” tutorial. The simple tutorial, in which a simple blog
application was scaffolded show all that you needed to know in order to get
started using Rails. The “Blog in 15 Minutes” tutorial is the gold standard for
introducing a framework.</p>

<p>When writing a tutorial, many authors focus on showing would-be developers all the
features of the framework/language, but completely miss explain how to structure
a cohesive application. Many tutorials show an application thats built in one file,
or if they do create separate files, they create “buckets full of method” files
which do not show new users how to break applications in to smaller components.</p>

<p>My goal with this tutorial is to build a small blog built using Vapor, a server
side framework for Swift. I’d like to cover the following topics:</p>

<ul>
  <li>Setup of Vapor on MacOS Sierra</li>
  <li>The creation of a Vapor projects</li>
  <li>Connecting the Vapor project to a database</li>
  <li>Building a controller that will handle the CRUD methods for creating posts</li>
  <li>Building Leaf templates to build the user interface.</li>
</ul>

<!--more-->

<p>In the future, I may add additional posts which will add user authentication,
move the creation of blog posts in to an administrative area, and possibly add
tags to a post. With that, lets get started with our first Vapor project.</p>

<h2 id="installation">Installation</h2>

<p>I’m going to be doing this tutorial on MacOS Sierra. To follow along, install
XCode from the Apple App Store. If you wish to do development on an Ubuntu box,
<a href="https://vapor.github.io/documentation/getting-started/install-swift-3-ubuntu.html">follow the installation instructions provided on Vapor’s site</a>.</p>

<p>The Vapor project team provides the Vapor Toolbox which helps you to quickly
scaffold a Vapor project. You can install it by opening up terminal and running
the following command:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>curl -sL check.vapor.sh | bash
</code></pre>
</div>

<p>After installation, test that everything works.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>vapor --help
</code></pre>
</div>

<h1 id="creating-our-first-project">Creating Our First Project</h1>

<p>We’re going to use the Vapor Toolbox to create our first project. By default, Vapor
scaffolds an application with an example model and controller created. For the
purpose of this tutorial, I’d like to create these manually, so we’re going to
specify a custom template I created.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>vapor new VaporBlog --template<span class="o">=</span>nwwatson/vapor-starter
</code></pre>
</div>

<p>This will scaffold a default project structure. Don’t worry much about it right
now. We’ll dive more in to that shortly. The first thing we want to do is build
and run the project to ensure everything works. To build the project, run the
following command in terminal:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>vapor build
</code></pre>
</div>

<p>Once the project is built, lets run it to ensure everything works correctly.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>vapor run serve
</code></pre>
</div>

<p>At this point, you should be able to open the web address <a href="http://localhost:8080">http://localhost:8080</a> in your browser and
see our application running.</p>

<h2 id="creating-an-xcode-project">Creating an XCode Project</h2>

<p>We are going to use XCode for this tutorial. While you can develop Swift
applications using other tools, such as Atom, XCode provides an integrated
environment that will greatly help for development and trouble shooting. To
generate the XCode project, use the following shell command.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>vapor xcode
</code></pre>
</div>
<p>The console will ask if you would like to open the XCode project. Type a ‘Y’
and hit return, the XCode project should open for you.</p>

<h2 id="setting-up-a-database">Setting Up A Database</h2>

<p>For this tutorial, we’re going to use SQLite for data storage This provides a
simple way to develop an application without having setup MySQL or PostgeSQL
connection strings. SQLite should be installed by default if you’re using MacOS,
if not, you can install it using Homebrew.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>brew install sqlite3
</code></pre>
</div>

<p>Once installed, we’ll need to setup our vapor project to use SQLite. The first
thing we have to do is modify our Package.swift file to include the SQLite
provider for Vapor.</p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">PackageDescription</span>

<span class="k">let</span> <span class="nv">package</span> <span class="o">=</span> <span class="kt">Package</span><span class="p">(</span>
  <span class="nv">name</span><span class="p">:</span> <span class="s">"VaporBlog"</span><span class="p">,</span>
  <span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
    <span class="o">.</span><span class="kt">Package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/vapor/vapor.git"</span><span class="p">,</span> <span class="nv">majorVersion</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">minor</span><span class="p">:</span> <span class="mi">5</span><span class="p">),</span>
    <span class="o">.</span><span class="kt">Package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/vapor/sqlite-provider.git"</span><span class="p">,</span> <span class="nv">majorVersion</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nv">minor</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
  <span class="p">],</span>
  <span class="nv">exclude</span><span class="p">:</span> <span class="p">[</span>
    <span class="s">"Config"</span><span class="p">,</span>
    <span class="s">"Database"</span><span class="p">,</span>
    <span class="s">"Localization"</span><span class="p">,</span>
    <span class="s">"Public"</span><span class="p">,</span>
    <span class="s">"Resources"</span><span class="p">,</span>
  <span class="p">]</span>
<span class="p">)</span>
</code></pre>
</div>

<p>Once you have made the change to Package.swift, you’ll need to build and regenerate
the XCode project in order to get the SQLite 3 dependencies as a part of your project.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>vapor clean <span class="o">&amp;&amp;</span> vapor xcode
</code></pre>
</div>

<p>Once XCode is reopened, we will need to add configuration to tell Vapor where to
place our SQLite database. Lets create a sqlite.json file in the Config directory
of the project.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/db/database.sqlite3"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>The path specified in this file is set relatively from the Vapor project’s
working directory. We want to ensure that the sqlite file does not get checked
in to source control (if you’re using one), so we’re going to add it to our
.gitignore file.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Packages
.build
xcuserdata
*.xcodeproj
Config/secrets
/db/*.sqlite3
</code></pre>
</div>

<p>Finally, we will write some code to connect to the SQLite3 database and display
the version to ensure we have everything setup correctly. First, we’ll import
the SQLite3 provider in to Main.swift</p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">VaporSQLite</span>
</code></pre>
</div>

<p>Next, we’re going to add provider to the Vapor Droplet for SQLite.</p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="k">try</span> <span class="n">drop</span><span class="o">.</span><span class="nf">addProvider</span><span class="p">(</span><span class="kt">VaporSQLite</span><span class="o">.</span><span class="kt">Provider</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>
</code></pre>
</div>

<p>Finally, we’re going to modify our base route to query for the version of
SQLite and pass along data to our view</p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="n">drop</span><span class="o">.</span><span class="k">get</span> <span class="p">{</span> <span class="n">req</span> <span class="k">in</span>
  <span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="n">drop</span><span class="o">.</span><span class="n">database</span><span class="p">?</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="nf">raw</span><span class="p">(</span><span class="s">"SELECT sqlite_version()"</span><span class="p">)</span>
  <span class="k">let</span> <span class="nv">row</span> <span class="o">=</span> <span class="n">result</span><span class="p">?</span><span class="o">.</span><span class="n">array</span><span class="p">?</span><span class="o">.</span><span class="n">first</span><span class="p">?</span><span class="o">.</span><span class="n">object</span>
  <span class="k">let</span> <span class="nv">version</span> <span class="o">=</span> <span class="n">row</span><span class="p">?[</span><span class="s">"sqlite_version()"</span><span class="p">]?</span><span class="o">.</span><span class="n">string</span>

  <span class="k">return</span> <span class="k">try</span> <span class="n">drop</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="nf">make</span><span class="p">(</span><span class="s">"welcome"</span><span class="p">,</span> <span class="p">[</span>
    <span class="s">"sqlite-version"</span><span class="p">:</span> <span class="p">(</span><span class="n">version</span><span class="p">?</span><span class="o">.</span><span class="nf">makeNode</span><span class="p">())</span><span class="o">!</span><span class="p">,</span>
    <span class="s">"app-name"</span><span class="p">:</span> <span class="n">drop</span><span class="o">.</span><span class="n">localization</span><span class="p">[</span><span class="n">req</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span> <span class="s">"application"</span><span class="p">,</span> <span class="s">"name"</span><span class="p">],</span>
    <span class="s">"app-description"</span><span class="p">:</span> <span class="n">drop</span><span class="o">.</span><span class="n">localization</span><span class="p">[</span><span class="n">req</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span> <span class="s">"application"</span><span class="p">,</span> <span class="s">"description"</span><span class="p">],</span>
    <span class="s">"app-author"</span><span class="p">:</span> <span class="n">drop</span><span class="o">.</span><span class="n">localization</span><span class="p">[</span><span class="n">req</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span> <span class="s">"application"</span><span class="p">,</span> <span class="s">"author"</span><span class="p">]</span>
  <span class="p">])</span>
<span class="p">}</span>
</code></pre>
</div>

<p>When all is said and done, your Main.swift file should look like this.</p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">Vapor</span>
<span class="kd">import</span> <span class="kt">VaporSQLite</span>

<span class="k">let</span> <span class="nv">drop</span> <span class="o">=</span> <span class="kt">Droplet</span><span class="p">()</span>
<span class="k">try</span> <span class="n">drop</span><span class="o">.</span><span class="nf">addProvider</span><span class="p">(</span><span class="kt">VaporSQLite</span><span class="o">.</span><span class="kt">Provider</span><span class="o">.</span><span class="k">self</span><span class="p">)</span>

<span class="n">drop</span><span class="o">.</span><span class="k">get</span> <span class="p">{</span> <span class="n">req</span> <span class="k">in</span>
  <span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="k">try</span> <span class="n">drop</span><span class="o">.</span><span class="n">database</span><span class="p">?</span><span class="o">.</span><span class="n">driver</span><span class="o">.</span><span class="nf">raw</span><span class="p">(</span><span class="s">"SELECT sqlite_version()"</span><span class="p">)</span>
  <span class="k">let</span> <span class="nv">row</span> <span class="o">=</span> <span class="n">result</span><span class="p">?</span><span class="o">.</span><span class="n">array</span><span class="p">?</span><span class="o">.</span><span class="n">first</span><span class="p">?</span><span class="o">.</span><span class="n">object</span>
  <span class="k">let</span> <span class="nv">version</span> <span class="o">=</span> <span class="n">row</span><span class="p">?[</span><span class="s">"sqlite_version()"</span><span class="p">]?</span><span class="o">.</span><span class="n">string</span>

  <span class="k">return</span> <span class="k">try</span> <span class="n">drop</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="nf">make</span><span class="p">(</span><span class="s">"welcome"</span><span class="p">,</span> <span class="p">[</span>
    <span class="s">"sqlite-version"</span><span class="p">:</span> <span class="p">(</span><span class="n">version</span><span class="p">?</span><span class="o">.</span><span class="nf">makeNode</span><span class="p">())</span><span class="o">!</span><span class="p">,</span>
    <span class="s">"app-name"</span><span class="p">:</span> <span class="n">drop</span><span class="o">.</span><span class="n">localization</span><span class="p">[</span><span class="n">req</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span> <span class="s">"application"</span><span class="p">,</span> <span class="s">"name"</span><span class="p">],</span>
    <span class="s">"app-description"</span><span class="p">:</span> <span class="n">drop</span><span class="o">.</span><span class="n">localization</span><span class="p">[</span><span class="n">req</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span> <span class="s">"application"</span><span class="p">,</span> <span class="s">"description"</span><span class="p">],</span>
    <span class="s">"app-author"</span><span class="p">:</span> <span class="n">drop</span><span class="o">.</span><span class="n">localization</span><span class="p">[</span><span class="n">req</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span> <span class="s">"application"</span><span class="p">,</span> <span class="s">"author"</span><span class="p">]</span>
  <span class="p">])</span>
<span class="p">}</span>

<span class="n">drop</span><span class="o">.</span><span class="nf">run</span><span class="p">()</span>
</code></pre>
</div>

<p>Now to test things out. Run the application using XCode and visit (http://localhost:8080](http://localhost:8080) in your browser.</p>

<h2 id="creating-our-post-model">Creating Our Post Model</h2>

<p>Now that SQLite is setup, lets build a model to represent our blog post. The
Model will use Vapor’s object relational mapping library Fluent. Fluent allows
developers to interact with the database without having to write SQL code.</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>touch Sources/App/Models/Post.swift
vapor xcode
</code></pre>
</div>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">Vapor</span>

<span class="kd">final</span> <span class="kd">class</span> <span class="kt">Post</span><span class="p">:</span> <span class="kt">Model</span> <span class="p">{</span>

  <span class="k">var</span> <span class="nv">id</span><span class="p">:</span> <span class="kt">Node</span><span class="p">?</span>
  <span class="k">var</span> <span class="nv">exists</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">false</span>

  <span class="k">var</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span>
  <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="kt">String</span>
  <span class="c1">//var postedOn: Double</span>

  <span class="nf">init</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">body</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="kc">nil</span>
    <span class="k">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
    <span class="k">self</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">body</span>
  <span class="p">}</span>

  <span class="nf">init</span><span class="p">(</span><span class="nv">node</span><span class="p">:</span> <span class="kt">Node</span><span class="p">,</span> <span class="k">in</span> <span class="nv">context</span><span class="p">:</span> <span class="kt">Context</span><span class="p">)</span> <span class="k">throws</span> <span class="p">{</span>
    <span class="n">id</span> <span class="o">=</span> <span class="k">try</span> <span class="n">node</span><span class="o">.</span><span class="nf">extract</span><span class="p">(</span><span class="s">"id"</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="k">try</span> <span class="n">node</span><span class="o">.</span><span class="nf">extract</span><span class="p">(</span><span class="s">"title"</span><span class="p">)</span>
    <span class="n">body</span> <span class="o">=</span> <span class="k">try</span> <span class="n">node</span><span class="o">.</span><span class="nf">extract</span><span class="p">(</span><span class="s">"body"</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="kd">func</span> <span class="nf">makeNode</span><span class="p">(</span><span class="nv">context</span><span class="p">:</span> <span class="kt">Context</span><span class="p">)</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="kt">Node</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">try</span> <span class="kt">Node</span><span class="p">(</span><span class="nv">node</span><span class="p">:[</span>
      <span class="s">"id"</span><span class="p">:</span> <span class="n">id</span><span class="p">,</span>
      <span class="s">"title"</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span>
      <span class="s">"body"</span><span class="p">:</span> <span class="n">body</span>
    <span class="p">])</span>
  <span class="p">}</span>

  <span class="kd">static</span> <span class="kd">func</span> <span class="nf">prepare</span><span class="p">(</span><span class="n">_</span> <span class="nv">database</span><span class="p">:</span> <span class="kt">Database</span><span class="p">)</span> <span class="k">throws</span> <span class="p">{</span>
    <span class="k">try</span> <span class="n">database</span><span class="o">.</span><span class="nf">create</span><span class="p">(</span><span class="s">"posts"</span><span class="p">)</span> <span class="p">{</span> <span class="n">posts</span> <span class="k">in</span>
      <span class="n">posts</span><span class="o">.</span><span class="nf">id</span><span class="p">()</span>
      <span class="n">posts</span><span class="o">.</span><span class="nf">string</span><span class="p">(</span><span class="s">"title"</span><span class="p">)</span>
      <span class="n">posts</span><span class="o">.</span><span class="nf">string</span><span class="p">(</span><span class="s">"body"</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">static</span> <span class="kd">func</span> <span class="nf">revert</span><span class="p">(</span><span class="n">_</span> <span class="nv">database</span><span class="p">:</span> <span class="kt">Database</span><span class="p">)</span> <span class="k">throws</span> <span class="p">{</span>
    <span class="k">try</span> <span class="n">database</span><span class="o">.</span><span class="nf">delete</span><span class="p">(</span><span class="s">"posts"</span><span class="p">)</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre>
</div>

<h2 id="creating-a-controller">Creating a Controller</h2>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>touch Sources/App/Controllers/PostsController.swift
vapor xcode
</code></pre>
</div>

    			</div>
    	</section>


      
      <div class="cf"></div>
      
        <section class="notepad-disqus row">
          <div class="small-12 columns">
            <h1 class="notepad-comments-header">Comments</h1>
            <div id="disqus_thread"></div>
            <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'nicholaswatson'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          </div>
        </section>
      
  </div>
</div>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57714341-1', 'auto');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>


</body>
</html>
